<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HBaker's Menu with Cart</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #000;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    .item-list ul {
      list-style: none;
      padding: 0;
      max-width: 600px;
      margin: auto;
    }
    .item-list li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #222;
      padding: 10px;
      border-bottom: 1px solid #444;
      margin-bottom: 5px;
    }
    .item-list .price {
      font-weight: bold;
      color: #ffc107;
    }
    .add-to-cart-btn {
      background-color: #ffc107;
      color: #000;
      border: none;
      padding: 5px 12px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
    }
    .quantity-controls {
      display: flex;
      align-items: center;
      border: 2px solid #fdd835;
      border-radius: 20px;
      padding: 3px 10px;
      background: #fff;
      color: #000;
    }
    .quantity-controls button {
      background: none;
      border: none;
      font-size: 18px;
      margin: 0 5px;
      cursor: pointer;
      color: #000;
    }
    .quantity-controls .qty {
      min-width: 20px;
      text-align: center;
      font-weight: bold;
    }
    #cart-box {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #fff;
      color: #000;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px #00000080;
      z-index: 999;
      width: 280px;
      font-size: 14px;
    }
    #cart-items {
      max-height: 200px;
      overflow-y: auto;
      margin-bottom: 10px;
    }
    #cart-items div {
      margin-bottom: 5px;
    }
    #send-whatsapp {
      width: 100%;
      background: #25d366;
      border: none;
      padding: 10px;
      color: #fff;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Example Menu -->
  <div class="item-list">
    <h3 style="text-align:center;">Hot Corner - Tea</h3>
    <ul>
      <li><span>Karak Tea</span><span class="price">1 AED</span></li>
      <li><span>Black Tea</span><span class="price">1.5 AED</span></li>
      <li><span>Ginger Tea</span><span class="price">2 AED</span></li>
    </ul>
  </div>

  <div class="item-list">
    <h3 style="text-align:center;">Sandwiches - Burgers</h3>
    <ul>
      <li><span>Chicken Burger</span><span class="price">4 AED</span></li>
      <li><span>Beef Burger</span><span class="price">5 AED</span></li>
      <li><span>Zinger Burger</span><span class="price">6 AED</span></li>
    </ul>
  </div>

  <div class="item-list">
    <h3 style="text-align:center;">Meals & Mains - Breakfast</h3>
    <ul>
      <li><span>Parotta & Curry</span><span class="price">3 AED</span></li>
      <li><span>Chapathi & Curry</span><span class="price">2 AED</span></li>
      <li><span>Poori Set</span><span class="price">4 AED</span></li>
    </ul>
  </div>

  <!-- Floating Cart -->
  <div id="cart-box">
    <h4>Your Cart</h4>
    <div id="cart-items"></div>
    <div id="cart-total">Total: 0 AED</div>
    <button id="send-whatsapp" onclick="sendOrderToWhatsApp()">Make Order</button>
  </div>

  <script>
    const cart = {};

    function addToCart(item, price) {
      if (cart[item]) {
        cart[item].qty += 1;
      } else {
        cart[item] = { price, qty: 1 };
      }
      updateCartUI();
      updateItemButton(item, price);
    }

    function removeFromCart(item) {
      if (cart[item]) {
        cart[item].qty--;
        if (cart[item].qty <= 0) delete cart[item];
        updateCartUI();
        updateItemButton(item, cart[item]?.price || 0);
      }
    }

    function updateCartUI() {
      const cartDiv = document.getElementById('cart-items');
      cartDiv.innerHTML = '';
      let total = 0;
      for (const item in cart) {
        const wrapper = document.createElement('div');
        const subtotal = cart[item].price * cart[item].qty;
        total += subtotal;

        wrapper.innerHTML = `
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <span><strong>${item}</strong></span>
            <div class="quantity-controls">
              <button onclick="removeFromCart('${item}')">${cart[item].qty === 1 ? 'üóëÔ∏è' : '‚àí'}</button>
              <span class="qty">${cart[item].qty}</span>
              <button onclick="addToCart('${item}', ${cart[item].price})">+</button>
            </div>
          </div>
        `;
        cartDiv.appendChild(wrapper);
      }
      document.getElementById('cart-total').innerText = `Total: ${total} AED`;
    }

    function sendOrderToWhatsApp() {
      if (Object.keys(cart).length === 0) {
        alert('Your cart is empty!');
        return;
      }
      let msg = `HBaker's Order:%0A`;
      for (const item in cart) {
        msg += `${item} x${cart[item].qty} = ${cart[item].price * cart[item].qty} AED%0A`;
      }
      msg += `%0ATotal: ${Object.values(cart).reduce((sum, i) => sum + i.price * i.qty, 0)} AED`;
      window.open(`https://wa.me/971585733762?text=${msg}`, '_blank');
    }

    function updateItemButton(item, price) {
      document.querySelectorAll('.item-list ul li').forEach(li => {
        const name = li.children[0].innerText.trim();
        if (name === item) {
          const existing = li.querySelector('.quantity-controls, .add-to-cart-btn');
          if (existing) existing.remove();

          if (!cart[item]) {
            const btn = document.createElement('button');
            btn.className = 'add-to-cart-btn';
            btn.innerText = 'Add to Cart';
            btn.onclick = () => addToCart(item, price);
            li.appendChild(btn);
          } else {
            const container = document.createElement('div');
            container.className = 'quantity-controls';

            const btnRemove = document.createElement('button');
            btnRemove.innerText = cart[item].qty === 1 ? 'üóëÔ∏è' : '‚àí';
            btnRemove.onclick = () => removeFromCart(item);

            const qtySpan = document.createElement('span');
            qtySpan.className = 'qty';
            qtySpan.innerText = cart[item].qty;

            const btnAdd = document.createElement('button');
            btnAdd.innerText = '+';
            btnAdd.onclick = () => addToCart(item, price);

            container.appendChild(btnRemove);
            container.appendChild(qtySpan);
            container.appendChild(btnAdd);
            li.appendChild(container);
          }
        }
      });
    }

    window.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.item-list ul li').forEach(li => {
        const name = li.children[0].innerText.trim();
        const priceText = li.children[1].innerText.replace('AED', '').trim();
        const price = parseFloat(priceText.split('/').pop());

        const btn = document.createElement('button');
        btn.className = 'add-to-cart-btn';
        btn.innerText = 'Add to Cart';
        btn.onclick = () => addToCart(name, price);
        li.appendChild(btn);
      });
    });
  </script>
</body>
</html>
