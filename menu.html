<script>
  const cart = {};

  function addToCart(item, price) {
    if (cart[item]) {
      cart[item].qty += 1;
    } else {
      cart[item] = { price: price, qty: 1 };
    }
    updateCartUI();
  }

  function removeFromCart(item) {
    if (cart[item]) {
      cart[item].qty -= 1;
      if (cart[item].qty <= 0) delete cart[item];
      updateCartUI();
    }
  }

  function updateCartUI() {
    const cartDiv = document.getElementById('cart-items');
    cartDiv.innerHTML = '';
    let total = 0;
    for (let item in cart) {
      const line = document.createElement('div');
      const subtotal = cart[item].price * cart[item].qty;
      total += subtotal;
      line.innerHTML = `
        <span><strong>${item}</strong> (x${cart[item].qty}) - ${subtotal} AED</span>
        <button onclick="addToCart('${item}', ${cart[item].price})">+</button>
        <button onclick="removeFromCart('${item}')">-</button>
      `;
      cartDiv.appendChild(line);
    }
    document.getElementById('cart-total').innerText = `Total: ${total} AED`;
  }

  function sendOrderToWhatsApp() {
    if (Object.keys(cart).length === 0) {
      alert('Cart is empty!');
      return;
    }
    let msg = 'HBaker\'s Order:%0A';
    for (let item in cart) {
      msg += `${item} x${cart[item].qty} = ${cart[item].price * cart[item].qty} AED%0A`;
    }
    const total = Object.values(cart).reduce((sum, i) => sum + i.qty * i.price, 0);
    msg += `%0ATotal: ${total} AED`;
    const phone = '971585733762'; // Replace with your WhatsApp number
    window.open(`https://wa.me/${phone}?text=${msg}`, '_blank');
  }
</script>

<style>
  #cart-box {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(255,255,255,0.95);
    color: #000;
    padding: 20px;
    border-radius: 10px;
    width: 300px;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
    z-index: 999;
  }
  #cart-items div {
    margin-bottom: 5px;
  }
  #cart-items button {
    margin-left: 5px;
    background: #e74c3c;
    color: #fff;
    border: none;
    padding: 3px 6px;
    border-radius: 3px;
    cursor: pointer;
  }
  #send-whatsapp {
    margin-top: 10px;
    background: #25D366;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: bold;
    width: 100%;
    cursor: pointer;
  }
</style>

<div id="cart-box">
  <h4>Cart</h4>
  <div id="cart-items"></div>
  <div id="cart-total">Total: 0 AED</div>
  <button id="send-whatsapp" onclick="sendOrderToWhatsApp()">Make Order</button>
</div>
